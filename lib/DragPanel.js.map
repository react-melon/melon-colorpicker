{"version":3,"sources":["DragPanel.js"],"names":["DragPanel","args","onMouseDown","bind","onMouseMove","onMouseUp","onClick","e","document","body","style","userSelect","position","main","getBoundingClientRect","window","addEventListener","onPositionChange","removeEventListener","clientX","clientY","left","top","width","height","x","y","props","render","children","rest","propTypes","func","isRequired"],"mappings":"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","file":"DragPanel.js","sourcesContent":["/**\n * @file DragPanel\n * @author leon <ludafa@outlook.com>\n */\n\n/* eslint-disable fecs-min-vars-per-destructure */\n\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class DragPanel extends PureComponent {\n\n    constructor(...args) {\n        super(...args);\n        this.onMouseDown = this.onMouseDown.bind(this);\n        this.onMouseMove = this.onMouseMove.bind(this);\n        this.onMouseUp = this.onMouseUp.bind(this);\n        this.onClick = this.onClick.bind(this);\n    }\n\n    static propTypes = {\n        onPositionChange: PropTypes.func.isRequired\n    };\n\n    onMouseDown(e) {\n        document.body.style.userSelect = 'none';\n        this.position = this.main.getBoundingClientRect();\n        window.addEventListener('mouseup', this.onMouseUp);\n        window.addEventListener('mousemove', this.onMouseMove);\n    }\n\n    onMouseMove(e) {\n        this.onPositionChange(e);\n    }\n\n    onMouseUp(e) {\n        document.body.style.userSelect = '';\n        this.onPositionChange(e);\n        window.removeEventListener('mouseup', this.onMouseUp);\n        window.removeEventListener('mousemove', this.onMouseMove);\n    }\n\n    onPositionChange(e) {\n        let {clientX, clientY} = e;\n        let {left, top, width, height} = this.position;\n\n        let x = clientX - left;\n        let y = clientY - top;\n\n        if (x < 0) {\n            x = 0;\n        }\n        else if (x > width) {\n            x = width;\n        }\n\n        if (y < 0) {\n            y = 0;\n        }\n        else if (y > height) {\n            y = height;\n        }\n\n        this.props.onPositionChange({\n            x: x / width,\n            y: y / height\n        });\n    }\n\n    onClick(e) {\n        this.position = this.main.getBoundingClientRect();\n        this.onPositionChange(e);\n    }\n\n    render() {\n\n        /* eslint-disable no-unused-vars */\n        let {children, onPositionChange, ...rest} = this.props;\n        /* eslint-enalbe no-unused-vars */\n\n        return (\n            <div\n                {...rest}\n                ref={main => (this.main = main)}\n                onMouseDown={this.onMouseDown}\n                onClick={this.onClick}>\n                {children}\n            </div>\n        );\n    }\n\n}\n"],"sourceRoot":"/source/"}