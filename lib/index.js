!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("melon-core/InputComponent"),require("melon-core/classname/cxBuilder"),require("melon/Button"),require("melon/Icon"),require("melon/common/util/dom"),require("react")):"function"==typeof define&&define.amd?define(["melon-core/InputComponent","melon-core/classname/cxBuilder","melon/Button","melon/Icon","melon/common/util/dom","react"],t):"object"==typeof exports?exports["melon-colorpicker"]=t(require("melon-core/InputComponent"),require("melon-core/classname/cxBuilder"),require("melon/Button"),require("melon/Icon"),require("melon/common/util/dom"),require("react")):e["melon-colorpicker"]=t(e["melon-core/InputComponent"],e["melon-core/classname/cxBuilder"],e["melon/Button"],e["melon/Icon"],e["melon/common/util/dom"],e.react)}(this,function(e,t,o,n,r,a){return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){e.exports=o(1)},function(e,t,o){var n,r,a;!function(l,s){r=[t,o(8),o(3),o(4),o(6),o(5),o(7),o(2)],n=s,a="function"==typeof n?n.apply(t,r):n,!(void 0!==a&&(e.exports=a))}(this,function(e,t,o,n,r,a,l,s){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var d=u(t),m=u(o),h=u(r),C=u(a),y=u(l),b=i(s),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},x=(0,n.create)("ColorPicker"),F=function(e){function t(o,n){c(this,t);var r=p(this,e.call(this,o,n));return r.onSubmit=r.onSubmit.bind(r),r.onHueChange=r.onHueChange.bind(r),r.onSaturationChange=r.onSaturationChange.bind(r),r.onBoxClick=r.onBoxClick.bind(r),r.onLabelClick=r.onLabelClick.bind(r),r.onHexChange=r.onHexChange.bind(r),r.isRawInputError=r.isRawInputError.bind(r),r.onClickAway=r.onClickAway.bind(r),r.state=g({},r.state,{satValue:"00FFE7",color:"00FFE7",open:!1,error:!1}),r}return f(t,e),t.prototype.componentWillUnmount=function(){y.default.off(document,"click",this.onClickAway)},t.prototype.onClickAway=function(e){var t=this,o=this.state.open;o&&!y.default.contains(this.refs.main,e.target)&&this.setState({open:!1},function(){y.default.off(document,"click",t.onClickAway)})},t.prototype.onLabelClick=function(e){var t=this,o=this.state.open;this.setState({open:!o},function(){o?y.default.off(document,"click",t.onClickAway):y.default.on(document,"click",t.onClickAway)})},t.prototype.isRawInputError=function(e){return""!==e&&3!==e.length&&6!==e.length},t.prototype.onSubmit=function(){if(!this.state.error){var t=this.state.color;this.setState({open:!1}),e.prototype.onChange.call(this,{type:"change",target:this,value:t?"#"+t:""})}},t.prototype.onHueChange=function(e){var t=this.refs.hue.getBoundingClientRect(),o=t.top,n=t.left,r=e.pageX-n,a=e.pageY-o,l=0,s=0,i=0;if(r>=0&&r<=240&&a>=0&&a<=16){var u=parseInt(r/40,10),c=r%40;switch(u){case 0:l=255,s=Math.round(255*c/40),i=0;break;case 1:l=Math.round(255*(1-c/40)),s=255,i=0;break;case 2:l=0,s=255,i=Math.round(255*c/40);break;case 3:l=0,s=Math.round(255*(1-c/40)),i=255;break;case 4:l=Math.round(255*c/40),s=0,i=255;break;case 5:l=255,s=0,i=Math.round(255*(1-c/40))}var p=""+b.toHex(l)+b.toHex(s)+b.toHex(i);this.setState({color:p,satValue:p})}},t.prototype.onBoxClick=function(e){var t=this.isRawInputError(e.val);this.setState({color:e.val,satValue:e.satVal,error:t})},t.prototype.onHexChange=function(e){var t=e.target.value;return!(t.length>6)&&(t=t.replace(/[^0-9a-fA-F]/gi,""),this.setState({color:t.toUpperCase()}),!0)},t.prototype.onSaturationChange=function(e){var t=this,o=this.refs.saturation.getBoundingClientRect(),n=o.top,r=o.left,a=this.state.satValue,l=e.pageX-r,s=e.pageY-n;l>=0&&l<=240&&s>=0&&s<=150&&!function(){var e=s/150,o=l/240,n=[0,2,4].reduce(function(t,n){var r=parseInt("0x"+a.slice(n,n+2),16);return r=255-(255-r)*o,r=b.toHex(Math.round(r*(1-e))),t+r},"");t.setState({color:n})}()},t.prototype.renderBox=function(e){var t=this,o=e.color,n=e.hue;return d.default.createElement("span",{key:o,className:x.getPartClassName("box"),style:{backgroundColor:"#"+o},onClick:function(){return t.onBoxClick({val:o,satVal:n})}})},t.prototype.renderBoxes=function(e){var t=this;return d.default.createElement("div",{className:x.getPartClassName("boxes")},e.map(function(e){return t.renderBox(e)}))},t.prototype.render=function(){var e=this,t=this.state,o=t.satValue,n=t.open,r=t.color,a=t.value,l=t.error,s=this.props,i=s.placeholder,u=s.boxes,c=s.variants,p=s.states,f=s.size,m=x(this.props).addVariants(c).addStates(p).build();return d.default.createElement("div",{ref:"main",className:m},d.default.createElement("label",{className:x.getPartClassName("label"),onClick:this.onLabelClick},d.default.createElement("span",{className:x.getPartClassName("placeholder"),style:{color:a?"#333":""}},a?a:i),d.default.createElement(h.default,{icon:"expand-more",size:f})),d.default.createElement("div",{className:x.getPartClassName("popup"),style:{display:n?"block":"none"}},d.default.createElement("div",{ref:"saturation",className:x.getPartClassName("saturation"),style:{backgroundColor:"#"+o},onClick:this.onSaturationChange},d.default.createElement("div",{className:x.getPartClassName("white")},d.default.createElement("div",{className:x.getPartClassName("black")}))),d.default.createElement("div",{ref:"hue",className:x.getPartClassName("hue"),onClick:this.onHueChange}),d.default.createElement("div",{className:x.getPartClassName("input-box")},d.default.createElement("span",null,"Hex"),d.default.createElement("input",{className:x.getPartClassName("rgbstr"),type:"text",onBlur:function(){e.setState({error:e.isRawInputError(r)})},ref:"rgbStr",placeholder:i,value:r,onChange:this.onHexChange,style:{border:l?"1px red solid":null}}),d.default.createElement("div",{className:x.getPartClassName("result"),style:{backgroundColor:"#"+r}}),d.default.createElement(C.default,{label:"OK",key:"submit",size:"xxs",type:"button",variants:["secondery"],className:x.getPartClassName("submit"),onClick:this.onSubmit})),this.renderBoxes(u)))},t}(m.default);e.default=F,F.displayName="ColorPicker",F.defaultProps=g({},m.default.defaultProps,{placeholder:"请选择",boxes:[{color:"FF425E",hue:"FF0059"},{color:"C6EDE8",hue:"00FFF9"},{color:"66CCCC",hue:"00FFF9"},{color:"FFFFFF",hue:"00FFF9"},{color:"000000",hue:"0079FF"},{color:"CCCCCC",hue:"00CCFF"},{color:"576069",hue:"FF0026"},{color:"E2D3AC",hue:"FFC600"},{color:"FDDA04",hue:"FFDF00"},{color:"E58308",hue:"FF8C00"},{color:"FF99CC",hue:"FF00BF"},{color:"FC9D9B",hue:"FF0000"},{color:"59453E",hue:"FF0000"},{color:"CCFF00",hue:"B3FF00"}]}),F.propTypes=g({},m.default.propTypes,{placeholder:t.PropTypes.string,boxes:t.PropTypes.arrayOf(t.PropTypes.shape({color:t.PropTypes.string.isRequired,hue:t.PropTypes.string.isRequired}))})})},function(e,t,o){var n,r,a;!function(o,l){r=[t],n=l,a="function"==typeof n?n.apply(t,r):n,!(void 0!==a&&(e.exports=a))}(this,function(e){"use strict";function t(e){return e=(+e).toString(16),1===e.length&&(e="0"+e),e.toUpperCase()}e.__esModule=!0,e.toHex=t})},function(t,o){t.exports=e},function(e,o){e.exports=t},function(e,t){e.exports=o},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=a}])});
//# sourceMappingURL=index.js.map